/*! sel - v0.1.0 - 2015-03-04 */

(function(){function a(){var a=this,b={};a.registerHandler=function(c,d){return b[c]=d,a},a.registerValue=function(c,d){var e=function(){return d};return b[c]=e,a},a.unregisterHandler=function(c){return delete b[c],a},a.getHandlers=function(){return b},a.getHandlerByName=function(a){if(!b.hasOwnProperty(a))throw new Error("SEL: unknown handler");return b[a]},a.inherit=function(a){var c=a.getHandlers();for(var d in c)b.hasOwnProperty(d)||(b[d]=c[d])}}function b(){function b(a,g,h){function i(a){for(var b=[],c=0;c<a.length;c++)if("("==a.charAt(c))b.push(c);else if(")"==a.charAt(c)){if("undefined"==typeof b.pop())return a.substring(0,c);if(0==b.length)return a.substring(0,c+1)}return a}if("string"!=typeof a)return a;if(h>=e)throw new Error("SEL: Recursion limit reached");g?g.inherit(f):g=f;for(var j=a,k=d.exec(a);k;){var l=null,m=i(k[0]);m!=k[0]&&(k=d.exec(m));var n=k[0],o=k[1],p=void 0!=k[2],q=k[3],r=g.getHandlerByName(o),s=null;p&&(s=b(q,g,h+1));try{l=r.call(c,s,g)}catch(t){throw new Error("SEL: Evaluation error")}if("string"==typeof j&&j.length==n.length){j=l;break}if("string"!=typeof j){j=l;break}j=j.replace(n,l||""),k=d.exec(j)}return j}var c=this,d=/\$(\w[\d\w]*)(\((.*)?\))?/,e=15,f=new a;c.getGlobalContext=function(){return f},c.evaluate=function(a,c){return b(a,c,0)}}function c(a){return a.registerHandler("anyOf",function(a){a=a.toLowerCase();var b=a.split(",");for(var c in b)if("true"==b[c].trim())return!0;return!1}),a.registerHandler("allOf",function(a){a=a.toLowerCase();var b=a.split(",");for(var c in b)if("true"!=b[c].trim())return!1;return!0}),a.registerHandler("not",function(a){a=a.toString().toLowerCase();var b=a.split(",");if(b.length>1)throw new Error("SEL: not handler accepts only one argument");var c=b[0].trim();return!("true"==c)}),a}var d="object"==typeof window&&window||this,e="object"==typeof exports&&exports&&!exports.nodeType&&exports,f="object"==typeof module&&module&&!module.nodeType&&module,g=f&&f.exports===e&&e,h="object"==typeof global&&global;!h||h.global!==h&&h.window!==h||(d=h);var i={getContext:function(){return new a},getEvaluator:function(){return new b},getDefaultContext:function(){return c(new a)},getDefaultEvaluator:function(){var a=new b;return c(a.getGlobalContext()),a}};"function"==typeof define&&"object"==typeof define.amd&&define.amd?(d.sel=i,define(function(){return i})):e&&f?g?(f.exports=i).sel=i:e.sel=i:d.sel=i}).call(this);
//# sourceMappingURL=sel.min.js.map